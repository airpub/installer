#!/bin/bash

cd $(pwd);

if [[ $1 == 'install' ]]; then
  # $2 must be version number
  if [[ $2 ]]; then
    npm install airpub@$2
  fi
  # install and clean src files
  npm install airpub
  mv node_modules/airpub/* .
  rm -rf node_modules
  # copy configs
  cp configs-sample.js configs.js
  # install bower deps
  if hash bower 2>/dev/null; then
    bower install 
  else
    echo '缺少 bower! 请手动安装 bower 后执行 bower install 安装依赖';
    exit 1;
  fi
elif [[ $1 == 'uninstall' ]]; then
  # will remove all files in CWD [!!!]
  rm -rf * 
fi
